<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Document</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="uiContainer">
    <div id="ui"></div>
</div>

<script  id="vertex-shader-2d" type="not-js">
attribute vec2 a_texCoord;

attribute vec2 a_position;
uniform vec2 u_resolution;

varying vec2 v_texCoord;

void main() {
    // преобразуем положение в пикселях к диапазону от 0.0 до 1.0
    vec2 zeroToOne = a_position / u_resolution;

    // преобразуем из 0->1 в 0->2
    vec2 zeroToTwo = zeroToOne * 2.0;

    // преобразуем из 0->2 в -1->+1 (пространство отсечения)
    vec2 clipSpace = zeroToTwo - 1.0;

    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

    v_texCoord = a_texCoord;
}
</script>

<script  id="fragment-shader-2d" type="not-js">
precision mediump float;

uniform sampler2D u_image; // наша текстура
uniform vec2 u_textureSize; // размер текстуры
uniform float u_kernel[9];
uniform float u_kernelWeight;

varying vec2 v_texCoord; // texCoords, переданные из вершинного шейдера

void main(){
    // рассчитываем один пиксель в текстурных координатах
    vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;

    vec4 colorSum =
        texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +
        texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +
        texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +
        texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +
        texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +
        texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +
        texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +
        texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +
        texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;

    gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1.0);
}
</script>
<canvas id="glcanvas">
<script src="funcs.js"></script>
<script src="script.js"></script>
</body>
</html>